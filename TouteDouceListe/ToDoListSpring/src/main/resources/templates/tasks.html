<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{index.html}">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Toute Douce Liste</title>
</head>

<body>
	<div layout:fragment="content">

		<div class="container">

			<!-- Search + add -->
			<div
				class="row mt-3 mb-5 d-flex flex-md-row flex-sm-column justify-content-md-between align-items-sm-center">
				<!-- Search -->
				
				<!-- ////////////////////////////FAIRE DES COL SELON TAILLE ECRAN -->
				
				<form class="d-flex col-3" role="search" th:action="@{/tasks}"
					method="get">
					<input class="form-control me-2" type="search" name="keyword"
						th:value="${keyword}" placeholder="Rechercher" aria-label="Search">
					<button class="btn btn-outline-success" type="submit">
						<i class="bi bi-search-heart"></i>
					</button>
				</form>

				<!-- Add -->
				<form class="d-flex col-9" th:action="@{/addTask}" method="post"
					th:object="${task}">
					<input type="text" class="form-control me-2" name="description" placeholder="Description"
						required>
					<!-- th:value="${task.description}"  -->
					<!-- <span th:errors="${article.description}"></span> -->

					<select class="form-select me-2 w-25" aria-label="Choose category"
						name="Category">

						<option th:each="c:${listCategories}" th:value="${c.id}"
							th:text="${c.name}"></option>
					</select>

					<button type="submit" class="btn btn-outline-primary">Ajouter</button>
				</form>
			</div>

			<!-- Cat + Taches -->
			<div class="row">
				<!-- Categories -->
				<div class="d-flex flex-column col-3">
					<h5 class="mt-3">Liste des catégories</h5>

					<button th:each="c:${listCategories}" type="button"
						class="btn btn-outline-success mt-3" th:text="${c.name}">Bouton
						Catégorie</button>
					<p></p>
					<button type="button" class="btn btn-outline-primary mt-3">Ajouter
						catégorie</button>

				</div>
				<!-- Taches -->
				<div class="col-9">
					<h5 class="mt-3">Liste des tâches</h5>

					<div class="row mt-3 mb-5" th:each="a:${listTasks}">

						<div class="d-flex flex-row justify-content-between">
							<p>
								Tâche : <span th:text="${a.nameTask}"></span>
							</p>
							<p>
								Date : <span th:text="${a.dateTask}"></span>
							</p>
						</div>

						<div class="d-flex flex-row align-items-center">
							<div class="shadow p-3 mb-0 bg-body rounded w-100 me-2">
							
								<div class="d-flex flex-row">
									<input type="checkbox" th:checked="${a.checked}" class="me-3" />
									<p th:text="${a.description}" class="mb-0"></p>
								</div>
								
								<p class="mb-0">
									Catégorie : <span th:text="${a.category.name}"></span>
								</p>
							</div>

							<i class="bi bi-trash me-2"></i> <i class="bi bi-pencil-square"></i>
						</div>
					</div>


					<!-- les boutons de pagination -->
					<ul class="nav nav-pills">
						<li class="nav-item" th:each="page,status:${pages}"><a
							th:class="${currentPage==status.index}?'nav-link active':'nav-link'"
							th:href="@{/tasks(page=${status.index},keyword=${keyword})}"
							th:text="${status.index}"></a></li>
					</ul>

				</div>
			</div>
		</div>

	</div>
</body>

</html>